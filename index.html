<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1.0">
        <title>WorldView</title>
        <link href="style.css" rel="stylesheet">
        <link href="menu.css" rel="stylesheet">
        <!--<link href="style.css" rel="stylesheet">-->
        <style>
            /* Set the size of the div element that contains the map */
            #map {
                height: 100%;  /* The height is 400 pixels */
                width: 100%;  /* The width is the width of the web page */
            }

            html, body {
                height: 100%;
                margin: 0;
                padding: 0;
            }

            .map-control {
                margin-right: 1em;
                margin-top: 0.5em;
                padding: 5px;
                border-radius: 3px;
                background-color: #fff;
                border: 1px solid #ccc;
                /*box-shadow: 0 2px 2px rgba(33, 33, 33, 0.4);*/
                font-family: "Roboto", "sans-serif";
                display: none;
            }

            #map .map-control {
                display: block;
            }

        </style>
    </head>
  <body>
    <!--The div element for the map -->
    <div id="style-selector-control" class="map-control">
        <input
            type="radio"
            name="show-hide"
            id="injustice-view"
            class="selector-control"
            checked="checked"
        />
        <label for="injustice-view">Injustice View</label>
        <input
            type="radio"
            name="show-hide"
            id="default-view"
            class="selector-control"
        />
        <label for="default-view">Default View</label>
    </div>
    <div class="menu-wrap">
        <input type="checkbox" class="toggler">
        <div class="hamburger"><div></div></div>
        <div class="menu">
          <div>
            <div>
              <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Map</a></li>
                <li><a href="#">Organizations</a></li>
                <li><a href="#">Contact Us</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
  
    <div id="map"></div>
    <script>
        let map;

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 3,
                center: {lat: -28.024, lng: 140.887},
                mapTypeControl: false,
                streetViewControl: false,
                styles: styles["injustice"]
            });

            // Add controls to the map, allowing users to hide/show features.
            const styleControl = document.getElementById("style-selector-control");
            map.controls[google.maps.ControlPosition.TOP_RIGHT].push(styleControl);

            // Default map settings
            // map.setOptions({ styles: styles["injustice"] });
            // map.setOptions({ streetViewControl: false });

            // Apply new JSON when the user chooses to hide/show features.
            document.getElementById("injustice-view").addEventListener("click", () => {
                map.setOptions({ styles: styles["injustice"] });
                map.setOptions({ streetViewControl: false });
            });
            document.getElementById("default-view").addEventListener("click", () => {
                map.setOptions({ styles: styles["default"] });
                map.setOptions({ streetViewControl: true });
            });
        
            // Create an array of alphabetical characters used to label the markers.
            //var labels = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    
            // Add some markers to the map.
            // Note: The code uses the JavaScript Array.prototype.map() method to
            // create an array of markers based on a given "locations" array.
            // The map() method here has nothing to do with the Google Maps API.
            var markers = locations.map(function(location, i) {
                var m = new google.maps.Marker({
                title: location.name,
                position: { lat: location.lat, lng: location.lng }
                });
                // Function when marker is clicked
                m.addListener("click", () => {
                    console.log("Marker name: " + m.getTitle());
                })
                return m;
            });

            var contentString = '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
                '<div id="bodyContent">'+
                '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
                'sandstone rock formation in the southern part of the '+
                'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
                'south west of the nearest large town, Alice Springs; 450&#160;km '+
                '(280&#160;mi) by road. Kata Tjuta and Uluru are the two major '+
                'features of the Uluru - Kata Tjuta National Park. Uluru is '+
                'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
                'Aboriginal people of the area. It has many springs, waterholes, '+
                'rock caves and ancient paintings. Uluru is listed as a World '+
                'Heritage Site.</p>'+
                '<p>Attribution: Uluru, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
                'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+
                '(last visited June 22, 2009).</p>'+
                '</div>'+
                '</div>';

            var infowindow = new google.maps.InfoWindow({
                content: contentString
            });

            // Add a marker clusterer to manage the markers.
            var markerCluster = new MarkerClusterer(map, markers, {
                imagePath: "https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",
                zoomOnClick: false
            });

            // Function when marker clusterer is clicked
            google.maps.event.addListener(markerCluster, "click", function(c) {              
                var m = c.getMarkers();
                var p = [];
                for (var i = 0; i < m.length; i++) {
                    p.push(m[i].getTitle());
                }

                infowindow.setPosition(c.getCenter());
                infowindow.setContent("Communities in this region facing injustice: <br>" + p.join(", <br>"));
                infowindow.open(map);
            });
        }

        // Put locations here
        var locations = [
            {name: "Venezuela", lat: 10.500000, lng: -66.916664},
            {name: "Hong Kong", lat: 22.302711, lng: 114.177216},
            {name: "Belarus", lat: 53.893009, lng: 27.567444},
            {name: "Yemen", lat: 12.800000, lng: 45.033333},
            {name: "Xinjian, China", lat: 44.402393, lng: 86.154785},
            {name: "South Sudan", lat: 4.859363, lng: 31.571251},
            // {lat: -33.851702, lng: 151.216968},
            // {lat: -34.671264, lng: 150.863657},
            // {lat: -35.304724, lng: 148.662905},
            // {lat: -36.817685, lng: 175.699196},
            // {lat: -36.828611, lng: 175.790222},
            // {lat: -37.750000, lng: 145.116667},
            // {lat: -37.759859, lng: 145.128708},
            // {lat: -37.765015, lng: 145.133858},
            // {lat: -37.770104, lng: 145.143299},
            // {lat: -37.773700, lng: 145.145187},
            // {lat: -37.774785, lng: 145.137978},
            // {lat: -37.819616, lng: 144.968119},
            // {lat: -38.330766, lng: 144.695692},
            // {lat: -39.927193, lng: 175.053218},
            // {lat: -41.330162, lng: 174.865694},
            // {lat: -42.734358, lng: 147.439506},
            // {lat: -42.734358, lng: 147.501315},
            // {lat: -42.735258, lng: 147.438000},
            // {lat: -43.999792, lng: 170.463352}
        ]
    </script>
    <script src="https://unpkg.com/@googlemaps/markerclustererplus/dist/index.min.js"></script>
    <script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDHtuUTxJUmmu5uV4cmssPGxZAzgB8d3Rg&callback=initMap"></script>
    <script type="text/javascript" src="mapstyles.js"></script> 
  </body>
</html>